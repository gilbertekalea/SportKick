{% extends "layout.html" %}
<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1, width=device-width">
<!-- Bootstrap cdn -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">

<!-- Custom css -->
<!-- for flask framework -->
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='/css/style.css')}}">

<!-- Custom css -->
<link rel="stylesheet" href="../static/css/style.css">
<link rel="stylesheet" href="../static/css/normalize.css">
<!-- Google fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
<title>What's up?</title>
</head>

<body>
    {% block body %}
    <main>
        <section id="create-post">
            <div class="container">
                <form action="/posts" method="post">
                    <div class="row justify-content-center">
                        <div class="col-sm-12 col-lg-7">
                            <h1 class="fs-5" id="title">Hi, <span class="text-danger">{{session.firstname}} </span>,
                                Anything you want share with the world?</h1>
                            <hr>
                        </div>
                    </div>
                    <div class="row justify-content-center">
                        <div class="col-sm-12 col-lg-6 col-md-6">
                            <div class="mb-3">
                                <label for="title" class="form-label fs-5">Topic</label>
                                <input type="text" name="title" autocomplete="off" autofocus maxlength="18"
                                    class="form-control fs-6 fw-light" id="title" placeholder="game tonight 9:30pm">
                            </div>
                        </div>
                    </div>
                    <div class="row justify-content-center">
                        <div class="col-sm-12 col-lg-6 col-md-6">
                            <div class="mb-3">
                                <label for="content" class="form-label fs-5">What's up? </label>
                                <textarea name="content" class="form-control fs-6" id="textarea-content" maxlength="250"
                                    style="resize: none; height:150px;" rows="3"
                                    placeholder="Hi, my name is Jane doe..."></textarea>
                                <div class="fs-6 text-secondary align-content-end" id="char">
                                    Maximum: 500 words.
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end justify-content-lg-center">
                        <input type="submit" value="submit" class="text-capitalize btn btn-outline-dark btn-sm"
                            id="submit">
                    </div>
                </form>
            </div>
        </section>

        <script>
            let element = document.getElementById("textarea-content");
            let counter = document.getElementById("char");

            //Key board events. 
            element.addEventListener("keypress", function (event) {
                if (element.value.length < 30) {
                    document.getElementById("textarea-content").style.borderColor = "red";
                }
                if (element.value.length > 30) {
                    document.getElementById("textarea-content").style.borderColor = "green";
                }
            });

            element.addEventListener("keydown", function (event) {
                let char_counts;
                if (event.keyCode === 8 && element.value.length === 0) {
                    counter.innerHTML = "Maximum: 500 Words."
                }
                else if (event.keyCode === 8 && element.value.length > 1) {
                    char_counts = element.value.length - 1;
                    counter.innerHTML = char_counts;
                }
                else if (event.which === 32 || event.keyCode === 17 || event.keyCode === 16 || event.keyCode === 20 || event.keyCode === 9) {
                    char_counts = element.value.length + 0;
                    counter.innerHTML = char_counts;
                }
                else if (event.keyCode !== 8) {
                    char_counts = element.value.length + 1;
                    counter.innerHTML = char_counts;
                }
            })
// Transform form element to scale of X and y
  </script>

        {% endblock %}
    </main>
</body>
</html>